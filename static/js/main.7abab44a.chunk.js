(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e){e.exports={b:"pk.eyJ1IjoiaGlwcG9seXRlaiIsImEiOiJjamdub2g0cmoyMjZyMndzN3I2eGd4Y3Y3In0.weVb9EjRtuH1lSMFAOqcCA",a:"mapbox://styles/hippolytej/cjgnojfg700a02rp30bjdees6"}},17:function(e,t,n){e.exports=n(38)},23:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(14),i=n.n(a),s=(n(23),n(2)),c=n(3),l=n(5),u=n(4),p=n(6),d=n(9),h=n.n(d),m=n(15),b=n(7),f=n(1),v=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.treeIds,n=this.props.treeDict;return o.a.createElement(b.b,{type:"symbol",id:"trees",layout:{"icon-image":"billy"}},t.map(function(t){return o.a.createElement(b.a,{onMouseEnter:e.props.onTreeHover.bind(e,t),onMouseLeave:e.props.onTreeEndHover.bind(e),coordinates:n[t].geometry.coordinates,onClick:e.props.onTreeClick.bind(null,t),key:t})}))}}]),t}(r.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.hoveredTree,t=this.props.onPopUpClick;return o.a.createElement(b.c,{key:e.recordid,coordinates:e.geometry.coordinates,offset:15,onClick:t},o.a.createElement("div",null,o.a.createElement("h3",null,e.fields.libellefrancais),o.a.createElement("div",null,"Esp\xe8ce : ",e.fields.espece),o.a.createElement("div",null,"Genre : ",e.fields.genre),e.fields.dateplantation?o.a.createElement("div",null," Ann\xe9e de plantation : ",e.fields.dateplantation.substr(0,4)," "):null))}}]),t}(r.Component),y=n(12),T=Object(b.d)({minZoom:8,maxZoom:15,accessToken:y.b}),O=y.a,k={speed:.6},E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onMapLoad=function(e){e.addControl(new f.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!1}))},n.onTreeHover=function(e,t){t.map.getCanvas().style.cursor="pointer",n.setState({hoveredTreeID:e})},n.onTreeEndHover=function(e){e.map.getCanvas().style.cursor="",n.setState({hoveredTreeID:""})},n.onTreeClick=function(e){n.setState({hoveredTreeID:e})},n.onPopUpClick=function(){n.setState({hoveredTreeID:""})},n.TreeData=Object(m.a)(h.a.mark(function e(){var t,r,o,a,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch("https://opendata.paris.fr/api/records/1.0/search/?dataset=arbresremarquablesparis&rows=200");case 3:return r=e.sent,e.next=6,r.json();case 6:for(o=e.sent,a=Math.min(o.parameters.rows,o.nhits),i=0;i<a;i++)t.push(i);return e.abrupt("return",n.setState({treeDict:o.records,nbTrees:a,treeIds:t},function(){console.log("dict",this.state.treeDict),console.log("nb",this.state.nbTrees),console.log("ids",this.state.treeIds)}));case 10:case"end":return e.stop()}},e,this)})),n.state={treeDict:"",nbTrees:0,treeIds:[],hoveredTreeID:"",mapCenter:[2.3466110229492188,48.85613168160397],zoom:[12]},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.TreeData()}},{key:"render",value:function(){var e=this.state.hoveredTreeID,t=this.state.mapCenter,n=this.state.zoom;return o.a.createElement(T,{onStyleLoad:this.onMapLoad,style:O,center:t,containerStyle:{width:"100vw",height:"100vh"},flyToOptions:k,zoom:n},o.a.createElement(v,{onTreeHover:this.onTreeHover,onTreeEndHover:this.onTreeEndHover,treeIds:this.state.treeIds,treeDict:this.state.treeDict,onTreeClick:this.onTreeClick}),e&&o.a.createElement(j,{hoveredTree:this.state.treeDict[e],onPopUpClick:this.onPopUpClick}))}}]),t}(r.Component),w=(n(36),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(E,null)}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.7abab44a.chunk.js.map